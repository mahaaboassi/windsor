import { useEffect, useState } from "react";
import { motion, AnimatePresence } from "framer-motion";

import img_1 from "../assets/images/before.png"
import img_2 from "../assets/images/before_2.png"
import img_3 from "../assets/images/after.png"
import img_4 from "../assets/images/after_2.png"

const data = [{before : img_1, after: img_3},
              {before : img_2, after: img_4}]
const Gallery = ()=>{
      const [dataIndex, setDataIndex] = useState(0);
    
      useEffect(() => {
        const intervalId = setInterval(() => {
          setDataIndex(prev => (prev + 1) % data.length); 
        }, 4000); 
        return () => clearInterval(intervalId);
      }, []);
    return(<div className="container-layout gallery bg-[var(--main)]  relative overflow-hidden">
        <div className="flex flex-col gap-5 md:gap-10 py-10 items-center relative z-1 ">
            <div className="heading">
                <h2 >BEFORE AND AFTER PHOTOS RESTORATION</h2>
            </div>
            <div className="w-full">
                <AnimatePresence mode="popLayout">
                    <motion.div
                    key={dataIndex} 
                    initial={{ opacity: 0 }}
                    animate={{ opacity: 1 }}
                    exit={{ opacity: 0 }}
                    transition={{ duration: 0.8, ease: "easeInOut" }}
                    className="grid rid-cols-1 md:grid-cols-2 gap-5 md:gap-16 lg:gap-30"
                    >
                        <motion.img
                            key={`${dataIndex}_before`}
                            src={data[dataIndex].before}
                            alt="Before"
                            className="container-layout-border-img h-[200px] xs:h-[250px] md:h-[300px]  object-cover w-full"
                            initial={{ opacity: 0 }}
                            animate={{ opacity: 1 }}
                            exit={{ opacity: 0 }}
                            transition={{ duration: 0.8 }}
                        />
                        <motion.img
                            key={`${dataIndex}_after`}
                            src={data[dataIndex].after}
                            alt="After"
                            className="container-layout-border-img h-[200px] xs:h-[250px] md:h-[300px] object-cover w-full"
                            initial={{ opacity: 0 }}
                            animate={{ opacity: 1 }}
                            exit={{ opacity: 0 }}
                            transition={{ duration: 0.8 }}
                        />
                    </motion.div>
                </AnimatePresence>
                
            </div>
            <div className="flex gap-2 justify-center">
                {[...Array(data.length)].map((_,idx)=>(<div onClick={()=>setDataIndex(idx)} key={`Circle_${idx}`} className={`circle cursor-pointer ${idx==dataIndex ? "fill-circle !bg-[var(--light)]" : "outline-circle !border-[var(--light)]"}`}></div>))}
            </div>
        </div>
        <div className="absolute hidden md:flex top-0 right-0">
            <svg xmlns="http://www.w3.org/2000/svg" width="395" height="334" viewBox="0 0 395 334" fill="none">
            <g clipPath="url(#clip0_1339_2135)">
            <path d="M98.4993 6.40684C105.399 8.60921 110.929 10.5413 115.449 12.103C123.939 15.0461 128.509 16.6279 132.189 16.6379C136.759 16.6479 142.819 14.4755 155.899 9.78047L165.159 6.45689C179.009 1.56162 192.539 -0.53064 204.919 0.130072C217.859 0.810806 229.589 4.49478 239.239 11.0719C246.349 15.9171 252.279 22.294 256.679 30.1624C260.159 24.3762 264.509 19.3508 269.609 15.1362C278.399 7.87842 289.369 3.19337 301.949 1.52157C314.659 -0.160241 329.029 1.21124 344.409 6.0965L345.249 6.40684C352.149 8.60921 357.679 10.5413 362.199 12.103C370.689 15.0461 375.259 16.6279 378.939 16.6379C383.509 16.6479 389.559 14.4755 402.649 9.78047L411.909 6.45689C425.759 1.56162 439.289 -0.53064 451.669 0.130072C464.609 0.810806 476.339 4.49478 485.989 11.0719C495.819 17.7691 503.389 27.3995 507.779 39.8429C510.989 48.9527 512.479 59.5641 511.839 71.5971C510.939 88.6355 506.239 105.123 499.549 121.141C493.469 135.676 485.739 149.811 477.769 163.616C481.639 188.093 483.559 210.297 483.829 230.128C484.119 252.652 482.289 272.053 478.799 288.221C475.039 305.669 468.639 319.304 461.389 326.572C457.029 330.937 452.089 333.419 446.809 333.7C441.179 333.99 435.859 331.828 431.159 326.872C424.949 320.325 419.539 307.872 416.089 288.281C415.169 283.065 414.599 277.089 414.359 274.496L414.139 272.303C410.669 236.925 407.219 202.078 378.239 201.357C364.239 204.62 356.849 211.228 352.789 220.888C348.029 232.19 346.859 248.528 345.519 268.529L344.869 276.628C344.529 280.432 344.059 284.747 343.499 288.171C340.219 308.052 334.709 320.706 328.339 327.273C323.659 332.088 318.369 334.23 312.819 333.97C307.549 333.73 302.589 331.307 298.209 327.002C290.869 319.795 284.489 306.17 281.029 288.471C278.369 274.876 276.879 257.117 276.349 235.524C275.839 214.862 276.199 190.655 277.219 163.226L270.629 148.82C265.699 138.199 260.759 127.537 256.659 116.666H254.609L252.799 121.141C246.719 135.676 238.989 149.811 231.019 163.616C234.889 188.093 236.809 210.297 237.079 230.128C237.369 252.652 235.539 272.053 232.049 288.221C228.289 305.669 221.889 319.304 214.639 326.572C210.279 330.937 205.339 333.419 200.059 333.7C194.429 333.99 189.109 331.828 184.409 326.872C178.199 320.325 172.789 307.872 169.339 288.281C168.419 283.065 167.849 277.089 167.609 274.496L167.389 272.303C163.919 236.925 160.469 202.078 131.489 201.357C117.489 204.62 110.099 211.228 106.039 220.888C101.279 232.19 100.109 248.528 98.7693 268.529L98.1193 276.628C97.7793 280.432 97.3093 284.747 96.7493 288.171C93.4693 308.052 87.9593 320.706 81.5893 327.273C76.9093 332.088 71.6193 334.23 66.0693 333.97C60.7993 333.73 55.8393 331.307 51.4593 327.002C44.1193 319.795 37.7393 306.17 34.2793 288.471C31.6193 274.876 30.1293 257.117 29.5993 235.524C29.0893 214.862 29.4493 190.655 30.4693 163.226L23.8793 148.82C13.9893 127.487 3.99934 105.964 0.969337 83.0795C-0.960663 68.5538 0.0893369 55.4397 3.65934 44.1876C7.38934 32.2847 13.9793 22.4641 22.8593 15.1362C31.6493 7.87842 42.6193 3.19337 55.1993 1.52157C67.9093 -0.160241 82.2793 1.21124 97.6593 6.0965L98.4993 6.40684ZM432.269 108.317C432.209 107.896 432.189 107.476 432.189 107.045C432.189 106.615 432.209 106.184 432.269 105.774V75.251H326.469V138.83H432.269V108.317ZM447.249 97.4149H487.739C490.429 88.5354 492.209 79.5957 492.679 70.616C493.179 61.1759 492.079 53.0371 489.679 46.2398C486.709 37.8307 481.669 31.3637 475.159 26.939C468.479 22.374 460.099 19.8113 450.689 19.3107C440.779 18.7902 429.759 20.5321 418.289 24.5764L409.069 27.87C393.839 33.3259 386.769 35.8386 378.939 35.8185C371.979 35.8085 366.349 33.8464 355.929 30.2225C350.454 28.2999 344.954 26.4511 339.429 24.6765L338.629 24.4563C325.909 20.4219 314.359 19.2407 304.429 20.5621C295.479 21.7434 287.799 24.9769 281.769 29.9522C275.829 34.8575 271.349 41.6348 268.709 49.9638C265.939 58.5731 265.169 68.8842 266.729 80.5968C267.469 86.1828 268.739 91.7889 270.399 97.4149H311.479V73.5892C311.479 69.9253 312.989 66.5917 315.409 64.1791C317.799 61.7465 321.139 60.2449 324.809 60.2449H433.909C437.559 60.2449 440.899 61.7565 443.309 64.1591C445.739 66.5717 447.249 69.9153 447.249 73.5892V97.4149ZM480.569 116.666H447.249V140.471C447.249 144.145 445.739 147.499 443.339 149.911C440.837 152.413 437.446 153.821 433.909 153.826H324.809C321.169 153.826 317.819 152.314 315.409 149.891C314.162 148.662 313.171 147.195 312.497 145.578C311.822 143.96 311.476 142.224 311.479 140.471V116.666H277.299C280.609 124.714 284.339 132.763 288.059 140.772C290.559 146.177 293.069 151.593 295.679 157.54C296.239 158.821 296.529 160.233 296.469 161.714C295.389 189.764 295.009 214.341 295.519 235.073C296.019 255.415 297.409 272.103 299.889 284.777C302.599 298.642 306.959 308.683 311.659 313.308C312.629 314.259 313.319 314.779 313.639 314.789L314.589 313.888C318.409 309.954 321.969 300.764 324.559 285.087C325.089 281.864 325.499 278.12 325.789 274.906L326.349 267.258C327.809 245.555 329.099 227.795 335.129 213.44C341.779 197.663 353.369 187.102 375.069 182.336C375.719 182.226 376.379 182.146 377.069 182.146C424.499 181.946 428.849 225.843 433.219 270.421L433.439 272.684C433.639 274.826 434.109 279.761 435.029 284.967C437.779 300.574 441.319 309.684 445.059 313.628L445.829 314.509C446.129 314.499 446.809 313.948 447.799 312.957C452.569 308.182 457.029 297.981 460.009 284.166C463.239 269.2 464.929 251.231 464.659 230.348C464.399 210.657 462.389 188.283 458.279 163.306C457.939 161.194 458.289 158.941 459.449 156.949C467.119 143.765 474.629 130.3 480.569 116.666ZM388.869 93.7209C388.869 90.6977 392.229 88.235 396.369 88.235C400.499 88.235 403.859 90.6977 403.859 93.7209V120.37C403.859 123.393 400.499 125.846 396.369 125.846C392.229 125.846 388.869 123.393 388.869 120.37V93.7209ZM354.869 93.7209C354.869 90.6977 358.229 88.235 362.359 88.235C366.499 88.235 369.859 90.6977 369.859 93.7209V120.37C369.859 123.393 366.499 125.846 362.359 125.846C358.229 125.846 354.869 123.393 354.869 120.37V93.7209ZM23.6493 97.4149H64.7293V73.5892C64.7293 69.9253 66.2393 66.5917 68.6593 64.1791C71.0493 61.7465 74.3893 60.2449 78.0593 60.2449H187.159C190.809 60.2449 194.149 61.7565 196.559 64.1591C198.999 66.5717 200.509 69.9153 200.509 73.5892V97.4149H240.989C243.679 88.5354 245.459 79.5957 245.929 70.616C246.429 61.1759 245.329 53.0371 242.929 46.2398C239.959 37.8307 234.919 31.3637 228.419 26.939C221.729 22.374 213.349 19.8113 203.939 19.3107C194.029 18.7902 183.009 20.5321 171.539 24.5764L162.319 27.87C147.089 33.3259 140.019 35.8386 132.189 35.8185C125.229 35.8085 119.599 33.8464 109.179 30.2225C103.704 28.2999 98.2039 26.4511 92.6793 24.6765L91.8793 24.4563C79.1593 20.4219 67.6093 19.2407 57.6793 20.5621C48.7293 21.7434 41.0493 24.9769 35.0193 29.9522C29.0793 34.8575 24.5993 41.6348 21.9593 49.9638C19.1893 58.5731 18.4193 68.8842 19.9793 80.5968C20.7193 86.1828 21.9893 91.7889 23.6493 97.4149ZM64.7293 116.666H30.5493C33.8593 124.714 37.5893 132.763 41.3093 140.772C43.8093 146.177 46.3193 151.593 48.9293 157.54C49.4893 158.821 49.7793 160.233 49.7193 161.714C48.6393 189.764 48.2593 214.341 48.7693 235.073C49.2693 255.415 50.6593 272.103 53.1393 284.777C55.8493 298.642 60.2093 308.683 64.9093 313.308C65.8793 314.259 66.5693 314.779 66.8893 314.789L67.8393 313.888C71.6593 309.954 75.2293 300.764 77.8093 285.087C78.3393 281.864 78.7493 278.12 79.0393 274.906L79.5993 267.258C81.0593 245.555 82.3493 227.795 88.3793 213.44C95.0293 197.663 106.619 187.102 128.319 182.336C128.969 182.226 129.629 182.146 130.319 182.146C177.749 181.946 182.099 225.843 186.469 270.421L186.689 272.684C186.889 274.826 187.369 279.761 188.279 284.967C191.029 300.574 194.579 309.684 198.309 313.628L199.079 314.509C199.379 314.499 200.059 313.948 201.049 312.957C205.819 308.182 210.279 297.981 213.259 284.166C216.489 269.2 218.179 251.231 217.909 230.348C217.649 210.657 215.639 188.283 211.529 163.306C211.189 161.194 211.549 158.941 212.699 156.949C220.369 143.765 227.879 130.3 233.819 116.666H200.509V140.471C200.501 144.012 199.092 147.406 196.59 149.909C194.088 152.412 190.697 153.82 187.159 153.826H78.0593C74.4193 153.826 71.0693 152.314 68.6593 149.891C67.4116 148.662 66.4214 147.195 65.7466 145.578C65.0718 143.96 64.726 142.224 64.7293 140.471V116.666ZM142.119 93.7209C142.119 90.6977 145.479 88.235 149.619 88.235C153.749 88.235 157.109 90.6977 157.109 93.7209V120.37C157.109 123.393 153.749 125.846 149.619 125.846C145.479 125.846 142.119 123.393 142.119 120.37V93.7209ZM108.119 93.7209C108.119 90.6977 111.479 88.235 115.609 88.235C119.749 88.235 123.109 90.6977 123.109 93.7209V120.37C123.109 123.393 119.749 125.846 115.609 125.846C111.479 125.846 108.119 123.393 108.119 120.37V93.7209ZM185.519 75.251H79.7193V138.83H185.519V75.251Z" fill="white" fill-opacity="0.5"/>
            </g>
            <defs>
            <clipPath id="clip0_1339_2135">
            <rect width="512" height="334" fill="white"/>
            </clipPath>
            </defs>
            </svg>
        </div>
        <div className="absolute  top-5 left-0 rotate-[-2deg]">
            <svg xmlns="http://www.w3.org/2000/svg" width="335" height="369" viewBox="0 0 335 369" fill="none">
                <g clipPath="url(#clip0_1339_2137)">
                <path fill-rule="evenodd" clipRule="evenodd" d="M73.1484 54.3095C79.0354 52.2548 85.495 52.5931 91.1433 55.2519C96.7916 57.9107 101.179 62.6785 103.366 68.5339L132.302 58.3386C133.034 55.7144 134.366 53.2977 136.192 51.2797C138.018 49.2616 140.288 47.6974 142.823 46.7108L216.965 12.3231C240.294 1.46311 258.883 49.0655 232.25 55.7037L152.944 75.4354C150.53 76.163 147.989 76.3714 145.487 76.0472C142.986 75.7229 140.58 74.8732 138.427 73.5537L108.812 83.9884L111.36 91.2225C111.58 91.8454 111.544 92.5297 111.259 93.125C110.975 93.7203 110.466 94.1777 109.845 94.3967L97.4975 98.7473L102.91 114.108L106.19 112.952C108.208 112.364 110.376 112.573 112.248 113.536C114.12 114.5 115.554 116.144 116.254 118.132C116.955 120.12 116.869 122.3 116.014 124.224C115.16 126.148 113.602 127.67 111.66 128.477L89.636 136.237C88.6038 136.666 87.4947 136.879 86.3766 136.864C85.2586 136.849 84.155 136.606 83.1332 136.149C82.1115 135.693 81.1932 135.032 80.4343 134.208C79.6754 133.384 79.092 132.414 78.7196 131.357C78.3472 130.3 78.1937 129.179 78.2685 128.061C78.3432 126.943 78.6447 125.853 79.1544 124.857C79.6642 123.861 80.3715 122.979 81.2331 122.266C82.0948 121.554 83.0927 121.025 84.1659 120.712L87.4226 119.565L82.0435 104.298L69.7195 108.64C69.0981 108.859 68.415 108.822 67.8204 108.536C67.2258 108.25 66.7684 107.74 66.549 107.117L58.6541 84.7105C56.5734 78.7462 56.9295 72.2032 59.6447 66.5082C62.3599 60.8133 67.214 56.4283 73.1484 54.3095ZM44.9949 173.247C48.5051 166.308 54.1534 160.689 61.1039 157.221C68.8302 153.425 77.3095 151.412 85.9194 151.329L86.4225 151.336C91.1433 151.204 94.8758 151.183 97.933 151.188C101.659 151.454 105.402 151.176 109.046 150.362C111.788 149.396 114.979 146.793 121.897 141.161L126.762 137.176C132.645 132.321 139.341 128.549 146.541 126.035C152.955 123.811 159.841 123.306 166.515 124.568C174.58 126.122 181.756 130.693 186.586 137.352C190.741 143.381 193.796 150.1 195.606 157.197C198.577 167.371 200.287 177.871 200.695 188.46C201.101 198.581 200.406 208.715 198.622 218.682C205.68 231.742 211.501 245.435 216.009 259.58C219.627 270.985 222.218 282.691 223.749 294.556C225.097 305.857 224.744 315.169 222.471 320.828C221.946 322.44 221.098 323.927 219.979 325.198C218.86 326.468 217.492 327.496 215.961 328.218C214.291 328.881 212.483 329.124 210.696 328.925C208.909 328.726 207.196 328.092 205.709 327.078C201.134 324.333 195.597 317.888 189.349 306.809C187.718 303.898 186.125 300.499 185.405 298.905L184.768 297.545C175.144 276.883 165.635 256.55 147.976 262.27C140.221 267.247 137.177 272.808 136.744 279.429C136.232 287.319 139.06 297.439 142.477 309.753L143.831 314.794C144.448 317.217 145.052 319.829 145.471 322.137C147.723 334.809 147.467 343.427 145.546 348.513C145.005 350.236 144.058 351.802 142.783 353.079C141.509 354.355 139.945 355.304 138.226 355.845C136.586 356.261 134.878 356.336 133.207 356.067C131.536 355.797 129.937 355.189 128.508 354.279C123.221 351.31 117.093 344.307 111.236 334.411C105.291 323.945 100.103 313.067 95.7106 301.861C90.8947 289.986 85.8756 275.966 80.9305 259.913C74.9052 253.501 69.2343 246.765 63.9433 239.733C58.4384 232.43 53.5706 224.667 49.3937 216.529C45.8423 210.252 43.1983 203.503 41.5407 196.484C39.9928 188.567 41.2126 180.361 44.9949 173.247ZM66.7687 168.215C62.1348 170.52 58.3638 174.255 56.0105 178.871C53.434 183.559 52.5586 188.998 53.5331 194.265C54.9915 200.155 57.2442 205.819 60.2289 211.101C64.1025 218.62 68.6128 225.794 73.7099 232.542C79.0058 239.555 84.6789 246.273 90.704 252.667C91.3386 253.34 91.8125 254.148 92.0898 255.03C97.1094 271.295 102.178 285.456 106.986 297.307C111.151 307.929 116.069 318.241 121.703 328.162C126.322 336.039 130.763 341.392 134.162 343.415C135.118 340.148 134.961 333.946 133.241 324.281C132.899 322.263 132.33 319.902 131.823 317.863L130.496 313.05C126.76 299.607 123.751 288.601 124.353 278.647C124.991 267.676 129.754 258.842 141.841 251.362L143.06 250.933C171.75 240.639 183.701 266.185 195.92 292.269L196.557 293.629C197.155 294.95 198.47 297.786 200.093 300.673C204.848 309.084 208.556 313.929 211.304 315.971C212.596 312.163 212.738 305.089 211.619 296.084C210.189 284.948 207.764 273.962 204.372 263.258C199.87 249.182 194.01 235.577 186.873 222.637C186.181 221.389 185.95 219.938 186.219 218.538C188.106 208.799 188.868 198.874 188.492 188.958C188.097 179.381 186.522 169.889 183.801 160.696C182.381 154.998 179.985 149.589 176.72 144.709C173.649 140.509 169.105 137.628 164.003 136.648C159.441 135.819 154.743 136.192 150.371 137.729C144.604 139.786 139.245 142.845 134.539 146.766L129.69 150.719C121.64 157.251 117.873 160.163 113.14 161.83C108.923 163.316 105.127 163.307 98.0778 163.336C95.0758 163.337 91.3984 163.366 86.8113 163.503L86.413 163.644C79.6628 163.675 73.0042 165.192 66.9078 168.087L66.7687 168.215ZM211.336 316.884C211.055 316.983 211.148 316.95 211.336 316.884V316.884Z" fill="white" fill-opacity="0.5"/>
                </g>
                <defs>
                <clipPath id="clip0_1339_2137">
                <rect width="247" height="306" fill="white" transform="translate(0 80.0828) rotate(-19.4096)"/>
                </clipPath>
                </defs>
            </svg>
        </div>
    </div>)
}
export default Gallery  